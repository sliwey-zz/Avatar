!function(e,t,i){"use strict";function n(e){var i=new Image;i.src=t.URL.createObjectURL(e),i.onload=function(){L.drawImage(i,0,0,200,200),h.style.visibility="hidden",y.style.visibility="visible",I=!0,s=L.getImageData(0,0,y.width,y.height),g=l(s),t.URL.revokeObjectURL(e)}}function a(e,t){var i,n,a,d,r,c,l,s,g=e.data,h=20,o=20,v=e.width/o,f=e.height/h;for(L.clearRect(0,0,y.width,y.height),i=0;h>i;i++)for(n=0;o>n;n++)a=~~(v*n+v/2),d=~~(f*i+f/2),r=4*a+~~(d*e.width*4),c=g[r],l=g[r+1],s=g[r+2],L.fillStyle="rgb("+c+","+l+","+s+")",L.fillRect(v*n,f*i,v,f);return t?L.getImageData(0,0,y.width,y.height):e}function d(e,t){var i=t?e:l(e),n=i.data,a=i.width*i.height;L.clearRect(0,0,y.width,y.height);for(var d=0;a>d;d++)n[4*d]=255-n[4*d],n[4*d+1]=255-n[4*d+1],n[4*d+2]=255-n[4*d+2];L.putImageData(i,0,0)}function r(e,t){var i,n=t?e:l(e),a=n.data,d=n.width*n.height;L.clearRect(0,0,y.width,y.height);for(var r=0;d>r;r++)i=~~((a[4*r]+a[4*r+1]+a[4*r+2])/3),a[4*r]=i,a[4*r+1]=i,a[4*r+2]=i;L.putImageData(n,0,0)}function c(){s&&(L.putImageData(s,0,0),g=l(s))}function l(e){for(var t=L.createImageData(e.width,e.height),i=e.data,n=t.data,a=0;a<i.length;a++)n[a]=i[a];return t}var s,g,h=e.getElementById("target"),o=e.getElementById("file"),v=e.getElementById("pixelate"),f=e.getElementById("inverse"),u=e.getElementById("gray"),m=e.getElementById("reset"),E=e.getElementById("mix"),y=e.getElementById("canvas"),L=y.getContext("2d"),I=!1,w=!1;h.addEventListener("click",function(){o.click()},!1),h.addEventListener("dragenter",function(e){var t=e.dataTransfer.types;t=Array.prototype.slice.call(t),-1!==t.indexOf("Files")&&this.classList.add("active")},!1),h.addEventListener("dragover",function(e){e.preventDefault()},!1),h.addEventListener("dragleave",function(e){this.classList.remove("active")},!1),h.addEventListener("drop",function(e){var t=e.dataTransfer.files[0];n(t),e.preventDefault()},!1),o.addEventListener("change",function(){var e=this.files[0];n(e)},!1),v.addEventListener("click",function(){I&&(g=a(g,w))},!1),f.addEventListener("click",function(){I&&d(g,w)},!1),u.addEventListener("click",function(){I&&r(g,w)},!1),m.addEventListener("click",function(){c()},!1),E.addEventListener("change",function(){w=this.checked,c()},!1)}(document,window);