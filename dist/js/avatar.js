function pixelate(t){var e=new Image;e.src=t,e.onload=function(){ctx.drawImage(e,0,0,200,200);var t=ctx.getImageData(0,0,canvas.width,canvas.height),a=t.data;ctx.clearRect(0,0,canvas.width,canvas.height);for(var i=20,n=20,c=t.width/n,d=t.height/i,l=0;i>l;l++)for(var r=0;n>r;r++){var v=~~(c*r+c/2),s=~~(d*l+d/2),g=4*v+~~(s*t.width*4),h=a[g],o=a[g+1],f=a[g+2];ctx.fillStyle="rgb("+h+","+o+","+f+")",ctx.fillRect(c*r,d*l,c,d)}target.style.visibility="hidden",canvas.style.visibility="visible"}}var target=document.getElementById("target"),input=document.getElementById("file"),canvas=document.getElementById("canvas"),ctx=canvas.getContext("2d");target.addEventListener("click",function(){input.click()}),input.addEventListener("change",function(){var t=this.files[0];pixelate(window.URL.createObjectURL(t))});